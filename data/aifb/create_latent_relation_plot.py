import numpy as np

# params = [np.array([[-0.10644882,  0.00254604],
#        [ 0.00109119,  0.03517041],
#        [-0.10341699, -0.03876802],
#        [-0.06776137, -0.03344604],
#        [-0.00683179, -0.16810207],
#        [-0.02449144, -0.07623339],
#        [-0.12501039, -0.0929191 ],
#        [-0.10131423, -0.02188076],
#        [-0.04878934, -0.05388323],
#        [-0.12154379, -0.04047259],
#        [-0.08944634, -0.10191958],
#        [-0.00601473, -0.05565792],
#        [-0.12060081, -0.1025203 ],
#        [ 0.03386188,  0.01961242],
#        [-0.06641374, -0.11439721],
#        [-0.18828478, -0.11562894],
#        [ 0.01361214,  0.08361251],
#        [-0.11294693, -0.10115017],
#        [ 0.04955765, -0.0493121 ],
#        [-0.02428952, -0.0732282 ],
#        [-0.07257576, -0.028302  ],
#        [-0.07418412,  0.02906134],
#        [ 0.10479108, -0.01631106],
#        [-0.08885403,  0.02256379],
#        [-0.0848437 , -0.09110732],
#        [-0.05206815,  0.04875573],
#        [-0.04559201, -0.10361643],
#        [-0.00763553, -0.01200414],
#        [-0.064646  , -0.10097735],
#        [-0.07719684, -0.12375198],
#        [-0.12316618,  0.01526273],
#        [ 0.01129538, -0.09010725],
#        [-0.05840519, -0.11601674],
#        [-0.19083215, -0.00235741],
#        [-0.02884219,  0.01213096],
#        [-0.10278589,  0.06825987],
#        [-0.10334226,  0.05230077],
#        [-0.07944459, -0.07939194],
#        [-0.08115225, -0.07597747],
#        [ 0.12063598, -0.17315358],
#        [-0.00024448, -0.1231794 ],
#        [-0.05610618, -0.07598853],
#        [-0.09013217, -0.15782845],
#        [-0.09945695,  0.05354125],
#        [ 0.10074337,  0.11466913]], dtype='float32'), np.array([ 0.0809435 ,  0.07463326], dtype='float32')]

params = [np.array([[ 0.01331929, -0.07221854],
       [ 0.06845181, -0.01398895],
       [ 0.07210256, -0.06841186],
       [-0.03739103, -0.09220944],
       [-0.00594397, -0.17694578],
       [-0.03140998, -0.19301935],
       [-0.01459782, -0.00671513],
       [ 0.06205945, -0.01180496],
       [ 0.05119583,  0.01980755],
       [ 0.04296337, -0.10757336],
       [ 0.01414532, -0.10503638],
       [ 0.10974138, -0.15117963],
       [-0.02839063, -0.02270172],
       [ 0.02120089,  0.09695421],
       [ 0.0155827 , -0.07084487],
       [ 0.1070103 , -0.05453564],
       [ 0.08476853, -0.06869334],
       [-0.03879147, -0.09019496],
       [ 0.1488217 , -0.09024474],
       [ 0.01818932, -0.08755922],
       [ 0.05793119, -0.02001695],
       [-0.02360413, -0.06587841],
       [ 0.02422715,  0.13318336],
       [ 0.10591806, -0.21795774],
       [-0.05464832, -0.14469963],
       [ 0.056775  , -0.01575543],
       [ 0.12367553, -0.08266108],
       [-0.00778193,  0.05426343],
       [ 0.08852091, -0.07321535],
       [-0.06364768,  0.01576975],
       [ 0.05668472, -0.08249449],
       [ 0.08408775, -0.09589516],
       [-0.01485026, -0.04682497],
       [-0.01752988, -0.07820926],
       [-0.03798329, -0.01299589],
       [ 0.13175286, -0.08135443],
       [-0.00413715, -0.12340715],
       [-0.03134441, -0.11930034],
       [-0.00565265, -0.05878649],
       [ 0.0216216 ,  0.14860106],
       [ 0.01028035, -0.04060142],
       [ 0.08802688, -0.07693909],
       [ 0.01126933, -0.04154872],
       [-0.07608103,  0.06539384],
       [ 0.00897445,  0.10308202]], dtype='float32'), np.array([-0.05507973,  0.06908865], dtype='float32')]


nb_relations = params[0].shape[0]
nb_outputs = params[0].shape[1]

outputs = np.zeros([nb_relations, nb_outputs])
for r in range(nb_relations):
    one_hot = np.zeros(nb_relations)
    one_hot[r] = 1
    outputs[r, :] = np.dot(one_hot, params[0]) + params[1]
    # outputs[r, :] = np.maximum(0.01, np.dot(one_hot, params[0]) + params[1])

import matplotlib.pyplot as plt
import pandas as pd

relations = pd.read_csv('aifb.relations', delimiter='\t', header=None)
relations = relations[1].as_matrix()
print(relations)

x=outputs[:,0]
y=outputs[:,1]

fig, ax = plt.subplots()
ax.scatter(x, y)

for i, relation in enumerate(relations):
    ax.annotate(relation.split('#')[-1], (x[i],y[i]))

plt.axvline(x=0.0)
plt.axhline(y=0.0)
plt.xlabel('weight for relation type in latent graph 1')
plt.ylabel('weight for relation type in latent graph 2')

plt.show()
